"use strict";(self.webpackChunknew=self.webpackChunknew||[]).push([[847,157],{407:(e,a,n)=>{n.r(a),n.d(a,{default:()=>K});var t=n(2791),s=n(7345),o=n(6871),r=n(6151),c=n(4721),l=n(3504),i=n(4428),d=n(5048),x=n(2696),u=n(8546),f=n(6002),h=n(7541),v=n(1160);const g=n.p+"static/media/group-vedio.6b53bc97b91d049e39f4c1c9baf011fd.svg";var b=n(184);const j=e=>{let{roomId:a,setVideocall:n}=e;const s=JSON.parse(localStorage.getItem("user"));let o=(0,t.useRef)(null);const j=(0,d.I0)();(0,t.useEffect)((()=>(o.current=(0,i.io)("http://localhost:5000"),o.current.emit("join",{name:s.name,userId:s._id,room:a},(e=>{e&&console.error(e)})),()=>{var e;null===(e=o.current)||void 0===e||e.disconnect()})),[]);const m=(0,x.Z)(r.Z)((()=>({color:u.Z[50],borderRadius:"25px",margin:"5px",backgroundColor:u.Z[900],"&:hover":{backgroundColor:u.Z[800]}})));return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"container-fluid vh-50 d-flex align-items-end justify-content-center bg-img",children:(0,b.jsx)("img",{src:g,alt:"text alt",width:"100%",height:"100%"})}),(0,b.jsx)(c.Z,{}),(0,b.jsxs)("div",{className:"container-fluid d-flex justify-content-center m-4",children:[(0,b.jsx)(m,{size:"large",variant:"contained",startIcon:(0,b.jsx)(f.Z,{}),onClick:()=>{o.current.emit("call"),j((0,v.vK)()),n(!0)},children:"Join Call"}),(0,b.jsx)(l.rU,{to:"/rooms/".concat(a),style:{textDecoration:"none"},children:(0,b.jsx)(m,{size:"large",startIcon:(0,b.jsx)(h.Z,{}),variant:"contained",children:"Home"})})]})]})};var m=n(6934),p=n(4395),Z=n(4663),I=n(890),k=n(5453),S=n(4012),C=n(8326),w=n(5519),y=n(2648),P=n(6339);const N={container:{width:"100vw",height:"100vh",display:"flex",flex:1,paddingTop:"48px"}},F=e=>{let{videocall:a,setVideocall:n}=e;const c=(0,m.ZP)(r.Z)((()=>({color:w.Z.A100,borderRadius:"25px",margin:"2px",backgroundColor:w.Z[900],"&:hover":{backgroundColor:w.Z[800]}}))),{roomId:l}=(0,o.UO)(),i=(0,d.I0)(),x=JSON.parse(localStorage.getItem("user")),[u,f]=(0,t.useState)(!0),[h,g]=(0,t.useState)(!1),[F,K]=(0,t.useState)(!0),{data:V,isSuccess:E}=(0,P.B7)({userId:x._id,roomId:l});(0,t.useEffect)((()=>{E&&(f(V.isProtected),g(!V.isProtected||V.host===x._id))}),[E]);const J={rtcProps:{appId:"f32cb060d43a478497b6c2d8818575c6",channel:l,token:null,role:h?"host":"audience",layout:F?s.bK.pin:s.bK.grid,enableScreensharing:!0},callbacks:{EndCall:()=>{i((0,v.vK)()),n(!1),window.location.reload(!1)}}};return(0,b.jsx)(b.Fragment,{children:a?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Z,{position:"fixed",elevation:6,children:(0,b.jsxs)(Z.Z,{variant:"dense",children:[(0,b.jsx)(I.Z,{sx:{flexGrow:1}}),!u&&(0,b.jsx)(c,{variant:"contained",startIcon:F?(0,b.jsx)(S.Z,{}):(0,b.jsx)(k.Z,{}),onClick:()=>K(!F),children:F?"Grid":"Pinned"}),(0,b.jsx)(c,{variant:"contained",startIcon:(0,b.jsx)(C.Z,{}),"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasScrolling","aria-controls":"offcanvasScrolling",children:"Chat"})]})}),(0,b.jsx)("div",{style:N.container,children:(0,b.jsx)(s.ZP,{rtcProps:J.rtcProps,callbacks:J.callbacks})}),(0,b.jsx)("div",{className:"offcanvas offcanvas-end","data-bs-scroll":"true","data-bs-backdrop":"false",tabIndex:"-1",id:"offcanvasScrolling","aria-labelledby":"offcanvasScrollingLabel",children:(0,b.jsx)("div",{className:"offcanvas-body",children:(0,b.jsx)(y.default,{})})})]}):(0,b.jsx)(j,{roomId:l,setVideocall:n})})},K=()=>{const[e,a]=(0,t.useState)(!1);return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(F,{videocall:e,setVideocall:a})})}}}]);
//# sourceMappingURL=847.aae8696a.chunk.js.map