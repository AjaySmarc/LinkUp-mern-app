"use strict";(self.webpackChunknew=self.webpackChunknew||[]).push([[768],{2648:(e,s,i)=>{i.r(s),i.d(s,{default:()=>pe});var t=i(2791),r=i(2739),o=i(3239),a=i(4395),n=i(4663),l=i(890),x=i(3400),d=i(6520),c=i(5289),m=i(5661),h=i(9157),p=i(7123),k=i(6151),y=i(5117),u=i(3786),j=i(7064),f=i(6871),g=i(3504),b=i(6339),Z=i(675),v=i(2946),E=i(7608),S=i(7749),w=i(1248),I=i(3368),C=i(2898),A=i(5206),D=i(9276),N=i(5519),V=i(5048),B=i(1160),F=i(6933),R=i(9900),z=i(184);const G=e=>{let{roomId:s,usersInRoom:i}=e;const a=JSON.parse(localStorage.getItem("user")),[n,{isSuccess:l,isLoading:x,isError:d,error:c}]=(0,b.BL)();return(0,t.useEffect)((()=>{l&&(A.Am.success("User Removed"),window.location.reload(!1)),d&&A.Am.error(c.message)}),[l,d]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(r.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:x,children:(0,z.jsx)(o.Z,{color:"inherit"})}),(0,z.jsx)(F.Z,{children:i.filter((e=>e.userId!==a._id)).map((e=>(0,z.jsxs)(u.Z,{children:[(0,z.jsx)(R.Z,{children:(0,z.jsx)("h3",{children:e.userName})}),(0,z.jsx)(k.Z,{variant:"contained",onClick:()=>(async e=>{await n({userId:a._id,roomId:s,newUserId:e})})(e.userId),children:"Remove"})]},e.userId)))})]})},T=e=>{let{roomId:s,usersInRoom:i}=e;const a=JSON.parse(localStorage.getItem("user")),{data:n,isSuccess:l}=(0,b.zQ)(),[x,{isLoading:d,isSuccess:c,isError:m,error:h}]=(0,b.p0)(),[p,y]=(0,t.useState)("");return(0,t.useEffect)((()=>{c&&(A.Am.success("User Added"),window.location.reload(!1)),m&&A.Am.error(h.message)}),[d]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(r.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:d,children:(0,z.jsx)(o.Z,{color:"inherit"})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("input",{placeholder:"Search User...",type:"text",value:p,onChange:e=>y(e.target.value),style:{marginTop:"10px"},className:"form-control bg-light"}),(0,z.jsx)("br",{}),(0,z.jsx)("div",{children:l&&(0,z.jsx)(F.Z,{children:n.filter((e=>!i.some((s=>s.userId===e._id))&&(""===p||!(!e.name.toLowerCase().includes(p.toLowerCase())&&!e.email.toLowerCase().includes(p.toLowerCase()))))).map((e=>(0,z.jsxs)(u.Z,{children:[(0,z.jsxs)(R.Z,{children:[(0,z.jsx)("h3",{children:e.name}),(0,z.jsx)("p",{children:e.email})]}),(0,z.jsx)(k.Z,{variant:"contained",onClick:()=>(async e=>{await x({userId:a._id,roomId:s,newUserId:e._id})})(e),children:"Add"})]},e._id)))})})]})]})};var L=i(8870),_=i(9877),U=i(4428),M=i(5995),P=i(9741),O=i.n(P),J=i(5172),W=i(6002),H=i(5430),q=i(8447),K=i(2613),Q=i(1686);i(1174),i(277);const X=new(window.SpeechRecognition||window.webkitSpeechRecognition);X.continuous=!0,X.interimResults=!0,X.lang="en-US";const Y=e=>{let{room:s,userId:i,typingHandler:r,setMessage:o,sendMessage:a,message:n}=e;const[l,x]=(0,t.useState)(!1);(0,t.useEffect)((()=>{c()}),[l]);const c=()=>{l?(X.start(),X.onend=()=>{console.log("continue.."),X.start()}):(X.stop(),X.onend=()=>{console.log("Stopped Mic on Click")}),X.onstart=()=>{console.log("Mics on")},X.onresult=e=>{const s=Array.from(e.results).map((e=>e[0])).map((e=>e.transcript)).join("");console.log(s),o(s),X.onerror=e=>{console.log(e.error)}}};return!1===s.isProtected||s.host===i?(0,z.jsxs)("div",{className:"foot form-group d-flex",children:[(0,z.jsx)("input",{id:"message",placeholder:"Type a message...",value:n,className:"form-control bg-light",onChange:r,onKeyPress:e=>"Enter"===e.key?a(e):null}),l?(0,z.jsx)(d.Z,{arrow:!0,title:"\ud83d\udd34Stop Listening",children:(0,z.jsx)("button",{onClick:()=>x((e=>!e)),className:"btn btn-danger mx-2",children:(0,z.jsx)(K.Z,{})})}):(0,z.jsx)(d.Z,{arrow:!0,title:"\ud83d\udc42Start Listening",children:(0,z.jsx)("button",{onClick:()=>x((e=>!e)),className:"btn btn-primary mx-2",children:(0,z.jsx)(q.Z,{})})}),(0,z.jsx)("button",{onClick:e=>a(e),className:"btn btn-primary mr-2",children:(0,z.jsx)(Q.Z,{})})]}):(0,z.jsx)("div",{className:"foot",children:(0,z.jsx)("h4",{children:"Only host can send message."})})};var $=i(2426),ee=i.n($),se=i(3044),ie=i(501);const te=e=>{let{message:s,name:i,userId:t}=e,r=!1;return s.senderId===t&&(r=!0),r?(0,z.jsx)("div",{className:"row justify-content-end pl-5 ",children:(0,z.jsxs)("div",{className:"rec d-flex flex-column align-items-end m-2 shadow p-2  border rounded w-auto",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("em",{className:"m-1 flex-start fw-bold text-uppercase",children:i}),(0,z.jsx)("em",{className:"m-1 flex-end",style:{fontSize:"10px"},children:ee()(s.timestamp).format("DD/MM hh:mm")})]}),(0,z.jsx)("h6",{className:"m-1",children:s.message})]})}):(0,z.jsxs)("div",{className:"row justify-content-start pl-5 ",children:[(0,z.jsx)(se.Z,{sx:{marginTop:"12px"},children:(0,z.jsx)(ie.Z,{})}),(0,z.jsxs)("div",{className:"sen d-flex flex-column align-items-end my-2 shadow p-2 border rounded w-auto",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("em",{className:"m-1 flex-start fw-bold text-uppercase",children:s.sender}),(0,z.jsx)("em",{className:"m-1 flex-end",style:{fontSize:"10px"},children:ee()(s.timestamp).format("DD/MM hh:mm")})]}),(0,z.jsx)("h6",{className:"m-1",children:s.message})]})]})},re=e=>{let{messages:s,name:i,userId:t}=e;return(0,z.jsx)("div",{className:"messages",children:s.map(((e,s)=>(0,z.jsx)("div",{children:(0,z.jsx)(te,{message:e,name:i,userId:t})},s)))})},oe=i.p+"static/media/received.047a5301ed579b826cce.mp3",ae=i.p+"static/media/sent.f58358e1367f39329d81.mp3",ne=i.p+"static/media/call.97210414e5b55c8521da.mp3",le=JSON.parse('{"v":"4.8.0","meta":{"g":"LottieFiles AE 1.1.0","a":"","k":"","d":"","tc":""},"fr":25,"ip":0,"op":66,"w":800,"h":800,"nm":"Comp 1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"dot3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":5,"s":[551,397.941,0],"to":[0,-22.5,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":12,"s":[551,262.941,0],"to":[0,0,0],"ti":[0,-6.667,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":18,"s":[551,397.941,0],"to":[0,6.667,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":23.334,"s":[551,302.941,0],"to":[0,0,0],"ti":[0,-4.833,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":28.667,"s":[551,397.941,0],"to":[0,4.833,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":34,"s":[551,331.941,0],"to":[0,0,0],"ti":[0,-2.5,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":39.334,"s":[551,397.941,0],"to":[0,2.5,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":44.667,"s":[551,346.941,0],"to":[0,0,0],"ti":[0,-4.667,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":50.889,"s":[551,397.941,0],"to":[0,4.667,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":58,"s":[551,374.941,0],"to":[0,0,0],"ti":[0,-3.833,0]},{"t":65.111328125,"s":[551,397.941,0]}],"ix":2},"a":{"a":0,"k":[1335.652,770.152,0],"ix":1},"s":{"a":0,"k":[130,130,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[74.305,74.305],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.258990747788,0.286569991766,0.955193014706,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[1327.957,768.566],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":66,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"dot2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":2,"s":[408,397.941,0],"to":[0,-22.5,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":9.444,"s":[408,262.941,0],"to":[0,0,0],"ti":[0,-6.667,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":14.889,"s":[408,397.941,0],"to":[0,6.667,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":20.223,"s":[408,302.941,0],"to":[0,0,0],"ti":[0,-4.833,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":25.556,"s":[408,397.941,0],"to":[0,4.833,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":30.889,"s":[408,331.941,0],"to":[0,0,0],"ti":[0,-2.5,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":36.223,"s":[408,397.941,0],"to":[0,2.5,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":41.556,"s":[408,346.941,0],"to":[0,0,0],"ti":[0,-4.667,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":47.777,"s":[408,397.941,0],"to":[0,4.667,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":54.889,"s":[408,374.941,0],"to":[0,0,0],"ti":[0,-3.833,0]},{"t":62,"s":[408,397.941,0]}],"ix":2},"a":{"a":0,"k":[1335.652,770.152,0],"ix":1},"s":{"a":0,"k":[130,130,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[74.305,74.305],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.256910286698,0.489340928022,0.917356004902,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[1327.957,768.566],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":66,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"dot1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[267,397.941,0],"to":[0,-22.5,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":5.444,"s":[267,262.941,0],"to":[0,0,0],"ti":[0,-6.667,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":11.889,"s":[267,397.941,0],"to":[0,6.667,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":18.223,"s":[267,302.941,0],"to":[0,0,0],"ti":[0,-4.833,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":23.556,"s":[267,397.941,0],"to":[0,4.833,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":28.889,"s":[267,331.941,0],"to":[0,0,0],"ti":[0,-2.5,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":34.223,"s":[267,397.941,0],"to":[0,2.5,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":39.556,"s":[267,346.941,0],"to":[0,0,0],"ti":[0,-4.667,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":45.777,"s":[267,397.941,0],"to":[0,4.667,0],"ti":[0,0,0]},{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":52.889,"s":[267,374.941,0],"to":[0,0,0],"ti":[0,-3.833,0]},{"t":60,"s":[267,397.941,0]}],"ix":2},"a":{"a":0,"k":[1335.652,770.152,0],"ix":1},"s":{"a":0,"k":[130,130,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[74.305,74.305],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.374571078431,0.662682267731,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[1327.957,768.566],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":66,"st":0,"bm":0}],"markers":[]}'),xe=JSON.parse('{"v":"5.5.2","fr":30,"ip":0,"op":90,"w":1020,"h":1020,"nm":"Comp 1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"facetime-button Outlines","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":30,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":40,"s":[-10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":50,"s":[10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":60,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":70,"s":[-10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":80,"s":[10]},{"t":89,"s":[0]}],"ix":10},"p":{"a":0,"k":[510.182,510.39,0],"ix":2},"a":{"a":0,"k":[58.5,42.5,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[183,183,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":20,"s":[253,253,100]},{"t":30,"s":[199,199,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.695,0.738],[0.519,0],[0.782,-0.824],[0,0],[0,0],[3.672,3.672],[5.172,0],[0,0],[3.672,-3.672],[0,-5.168],[0,0],[-3.672,-3.672],[-5.168,0],[0,0],[-3.676,3.672],[0,5.172],[0,0],[0,0],[-1.176,0],[-0.567,0.218],[0,1.824],[0,0]],"o":[[-0.567,-0.215],[-1.176,0],[0,0],[0,0],[0,-5.168],[-3.676,-3.672],[0,0],[-5.168,0],[-3.672,3.672],[0,0],[0,5.172],[3.672,3.672],[0,0],[5.172,0],[3.672,-3.672],[0,0],[0,0],[0.782,0.825],[0.519,0],[1.695,-0.739],[0,0],[0,-1.828]],"v":[[55.857,-39.305],[54.228,-39.629],[51.294,-38.391],[25.029,-12.188],[25.029,-22.945],[19.521,-36.207],[6.255,-41.715],[-39.631,-41.715],[-52.893,-36.207],[-58.4,-22.945],[-58.4,22.941],[-52.893,36.207],[-39.631,41.715],[6.255,41.715],[19.521,36.207],[25.029,22.941],[25.029,12.121],[51.294,38.39],[54.228,39.629],[55.857,39.301],[58.4,35.457],[58.4,-35.457]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0]],"o":[[0,0]],"v":[[55.857,-39.305]],"c":false},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[58.4,42.287],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Shape Layer 2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":42,"s":[84]},{"t":60,"s":[0]}],"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[510,510,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[5,5,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":20,"s":[48,48,100]},{"t":60,"s":[94,94,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.437835214652,0.159876954322,0.886274509804,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":2,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[510,510,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[91,91,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":30,"s":[118,118,100]},{"t":45,"s":[95,95,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"gf","o":{"a":0,"k":100,"ix":10},"r":2,"bm":0,"g":{"p":5,"k":{"a":0,"k":[0,0.294,0.035,0.71,0,0.294,0.035,0.71,0,0.294,0.035,0.71,0.5,0.357,0.049,0.855,1,0.42,0.063,1],"ix":9}},"s":{"a":0,"k":[-146,0],"ix":5},"e":{"a":0,"k":[110,0],"ix":6},"t":1,"nm":"Gradient Fill 1","mn":"ADBE Vector Graphic - G-Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"back layer 2","sr":1,"ks":{"o":{"a":0,"k":19,"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[510,510,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[89,89,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":51,"s":[99,99,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":63,"s":[100.947,100.947,100]},{"t":89,"s":[116,116,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.458636773801,0.125490188599,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":2,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"back layer","sr":1,"ks":{"o":{"a":0,"k":19,"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[510,510,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":0,"s":[89,89,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,0.833]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,0.167]},"t":51,"s":[99,99,100]},{"t":89,"s":[140,140,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[600,600],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.458636773801,0.125490188599,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":2,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":90,"st":0,"bm":0}],"markers":[]}');var de=i(3457),ce=i(7),me=i(2460);const he=e=>{let{userId:s,name:i,room:r,prevMessages:o}=e;const[a]=(0,M.Z)(oe),[n]=(0,M.Z)(ae),[l,{stop:d}]=(0,M.Z)(ne);let c=(0,t.useRef)(null);const m=(0,f.s0)(),[h]=(0,b.dq)(),p=(0,V.v9)(B.jI),[k,y]=(0,t.useState)(""),[u,j]=(0,t.useState)([]),[g,Z]=(0,t.useState)(!1),[v,E]=(0,t.useState)(!1),[S,w]=(0,t.useState)(!1);let I=(0,t.useRef)(null);const C=(0,t.useRef)();(0,t.useEffect)((()=>{j(o)}),[o]),(0,t.useEffect)((()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.scrollIntoView({block:"end",behaviour:"smooth"})}),[u,v]);(0,t.useEffect)((()=>(c.current=(0,U.ZP)("http://localhost:5000"),c.current.emit("join",{name:i,userId:s,room:r._id},(e=>{e&&console.error(e)})),()=>{var e;null===(e=c.current)||void 0===e||e.disconnect()})),[]),(0,t.useEffect)((()=>{c.current&&(c.current.on("message",(e=>{a(),j((s=>[...s,e]))})),c.current.on("typing",(()=>E(!0))),c.current.on("stop-typing",(()=>E(!1))),c.current.on("call",(()=>{p||(l(),w(!0),I.current=setTimeout((()=>{w(!1)}),35e3))})))}),[]);const A=(0,de.Z)(x.Z)((()=>({color:"#fff",borderRadius:"25px",margin:"2px",backgroundColor:ce.Z[900],"&:hover":{backgroundColor:ce.Z[800]}}))),D=(0,de.Z)(x.Z)((()=>({color:"#fff",borderRadius:"25px",margin:"2px",backgroundColor:me.Z[900],"&:hover":{backgroundColor:me.Z[800]}})));return(0,z.jsxs)(L.Z,{ref:C,children:[(0,z.jsxs)("div",{style:p?{minHeight:"85vh"}:{minHeight:"70vh"},children:[(0,z.jsx)(re,{messages:u,name:i,userId:s}),S&&(0,z.jsxs)(L.Z,{sx:{position:"fixed",bottom:"80px",right:"10px",zIndex:1501,width:"300px",height:"200px",border:"solid black 1px",borderRadius:"20px",background:"linear-gradient(124deg, rgba(165,103,215,1) 0%, rgba(79,79,252,0.9416141456582633) 100%)"},children:[(0,z.jsx)(O(),{animationData:xe,loop:!0,style:{height:120,width:300}}),(0,z.jsxs)("span",{className:"d-flex justify-content-evenly",children:[(0,z.jsx)(A,{color:"success",onClick:()=>{clearTimeout(I.current),w(!1),d(),m("/video-call/".concat(r._id))},children:(0,z.jsx)(W.Z,{fontSize:"large"})}),(0,z.jsx)(D,{color:"error",onClick:()=>{clearTimeout(I.current),d(),w(!1)},children:(0,z.jsx)(H.Z,{fontSize:"large"})})]})]}),v&&(0,z.jsx)(O(),{animationData:le,loop:!0,style:{height:120,width:150}})]}),(0,z.jsx)(Y,{room:r,userId:s,message:k,setMessage:y,typingHandler:e=>{if(y(e.target.value),!c.current)return;g||(Z(!0),c.current.emit("typing"));let s=(new Date).getTime();setTimeout((()=>{(new Date).getTime()-s>=3e3&&g&&(c.current.emit("stop-typing"),Z(!1))}),3e3)},sendMessage:async e=>{e.preventDefault(),k&&(c.current.emit("sendMessage",k,(()=>y(""))),c.current.emit("stop-typing"),n(),await h({userId:s,roomId:r._id,message:k}))}}),(0,z.jsx)(_.Z,{size:"small",color:"primary","aria-label":"scroll-to-bottom",onClick:()=>{var e;null===(e=C.current)||void 0===e||e.scrollIntoView({block:"end",behaviour:"smooth"})},sx:{position:"fixed",right:"10px",bottom:"70px"},children:(0,z.jsx)(J.Z,{fontSize:"small"})})]})},pe=()=>{const{roomId:e}=(0,f.UO)(),s=(0,f.s0)(),i=(0,V.v9)(B.jI),F=JSON.parse(localStorage.getItem("user")),[R,L]=(0,t.useState)(!0),{data:_,isSuccess:U,isError:M,isLoading:P,isFetching:O,error:J}=(0,b.B7)({userId:F._id,roomId:e}),[W,{data:H,isSuccess:q,isError:K,isLoading:Q,error:X}]=(0,b.zx)(),[Y]=(0,b.vp)(),[$,ee]=(0,t.useState)(!1),[se,ie]=(0,t.useState)(!1),[te,re]=t.useState(null),oe=Boolean(te),ae=()=>{ee(!0)},ne=()=>{ee(!1)},le=()=>{ie(!0)},xe=()=>{ie(!1)},de=async()=>{await W({userId:F._id,roomId:e})},ce=async()=>{await Y({userId:F._id,roomId:e,isProtected:!R}),L(!R)};return(0,t.useEffect)((()=>{U&&L(_.isProtected),M&&A.Am.error(J.message)}),[U,M]),(0,t.useEffect)((()=>{q&&(A.Am.success(H.message),s("/rooms")),K&&A.Am.error(X.message)}),[q,K]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(r.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:P||O||Q,children:(0,z.jsx)(o.Z,{color:"inherit"})}),U&&(0,z.jsxs)(z.Fragment,{children:[!i&&(0,z.jsx)(a.Z,{color:"inherit",elevation:1,position:"sticky",sx:{top:65},children:(0,z.jsxs)(n.Z,{children:[(0,z.jsx)(l.Z,{variant:"h5",component:"div",sx:{flexGrow:1},children:(0,z.jsx)("div",{className:"animate-charcter",style:{fontSize:"25px",paddingLeft:"8px"},children:_.name})}),(0,z.jsx)(l.Z,{noWrap:!0,variant:"h5",component:"div",sx:{flexGrow:5},children:_.users.map((e=>(0,z.jsxs)("span",{className:"text-uppercase",style:{fontSize:"18px"},children:[e.userName,","," "]},e.userId)))}),(0,z.jsx)(x.Z,{disableRipple:!0,onClick:e=>{re(e.currentTarget)},sx:{display:{xs:"block",md:"none",color:N.Z[900]}},children:(0,z.jsx)(C.Z,{})}),(0,z.jsxs)(D.Z,{sx:{display:{xs:"none",md:"flex"}},children:[_.host===F._id&&(0,z.jsx)(d.Z,{arrow:!0,title:"Add User in room",children:(0,z.jsx)("button",{onClick:ae,className:"btn btn-primary mx-2",children:(0,z.jsx)(Z.Z,{})})}),_.host===F._id&&(0,z.jsx)(d.Z,{arrow:!0,title:"Remove User from room",children:(0,z.jsx)("button",{onClick:le,className:"btn btn-danger mx-2",children:(0,z.jsx)(I.Z,{})})}),(0,z.jsx)(g.rU,{to:"/video-call/".concat(e),style:{textDecoration:"none"},children:(0,z.jsx)(d.Z,{arrow:!0,title:"Start Video Call",children:(0,z.jsx)("button",{className:"btn btn-primary mx-2",children:(0,z.jsx)(v.Z,{})})})}),(0,z.jsx)(d.Z,{arrow:!0,title:"Leave Room",children:(0,z.jsx)("button",{onClick:de,className:"btn btn-danger mx-2",children:(0,z.jsx)(E.Z,{})})}),_.host===F._id&&(0,z.jsx)(z.Fragment,{children:R?(0,z.jsx)(d.Z,{arrow:!0,title:"Unlock Room",children:(0,z.jsx)("button",{onClick:ce,className:"btn btn-success mx-2",children:(0,z.jsx)(w.Z,{})})}):(0,z.jsx)(d.Z,{arrow:!0,title:"Lock Room",children:(0,z.jsx)("button",{onClick:ce,className:"btn btn-danger mx-2",children:(0,z.jsx)(S.Z,{})})})})]})]})}),(0,z.jsxs)(c.Z,{open:$,onClose:ne,maxWidth:"sm",fullWidth:!0,children:[(0,z.jsx)(m.Z,{children:"Add User:"}),(0,z.jsx)(h.Z,{children:(0,z.jsx)(T,{roomId:e,usersInRoom:_.users})}),(0,z.jsx)(p.Z,{children:(0,z.jsx)(k.Z,{onClick:ne,children:"Cancel"})})]}),(0,z.jsxs)(c.Z,{open:se,onClose:xe,maxWidth:"sm",fullWidth:!0,children:[(0,z.jsx)(m.Z,{children:"Remove User:"}),(0,z.jsx)(h.Z,{children:(0,z.jsx)(G,{roomId:e,usersInRoom:_.users})}),(0,z.jsx)(p.Z,{children:(0,z.jsx)(k.Z,{onClick:xe,children:"Cancel"})})]}),(0,z.jsxs)(y.Z,{anchorEl:te,open:oe,onClose:()=>{re(null)},children:[_.host===F._id&&(0,z.jsxs)(u.Z,{onClick:ae,children:[(0,z.jsx)(j.Z,{children:(0,z.jsx)(Z.Z,{fontSize:"small"})}),"Add User"]}),_.host===F._id&&(0,z.jsxs)(u.Z,{onClick:le,children:[(0,z.jsx)(j.Z,{children:(0,z.jsx)(I.Z,{fontSize:"small"})}),"RemoveUser"]}),(0,z.jsx)(g.rU,{to:"/video-call/".concat(e),style:{textDecoration:"none"},children:(0,z.jsxs)(u.Z,{children:[(0,z.jsx)(j.Z,{children:(0,z.jsx)(v.Z,{fontSize:"small"})}),"Video Call"]})}),(0,z.jsxs)(u.Z,{onClick:de,children:[(0,z.jsx)(j.Z,{children:(0,z.jsx)(E.Z,{fontSize:"small"})}),"Leave Room"]}),_.host===F._id&&(0,z.jsx)(u.Z,{onClick:ce,children:R?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(j.Z,{children:(0,z.jsx)(w.Z,{fontSize:"small"})}),"Unlock Room"]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(j.Z,{children:(0,z.jsx)(S.Z,{fontSize:"small"})}),"Lock Room"]})})]}),(0,z.jsx)(D.Z,{sx:i?{paddingTop:"35px"}:{paddingTop:"0px"},children:(0,z.jsx)(he,{userId:F._id,name:F.name,room:_,prevMessages:_.messages})})]})]})}},277:()=>{}}]);
//# sourceMappingURL=768.d95ff1c9.chunk.js.map